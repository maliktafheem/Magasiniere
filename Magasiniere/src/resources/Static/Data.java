package resources.Static;

import javafx.application.Platform;
import java.io.*;
import java.util.ArrayList;
import java.util.List;

public class Data {
    public static String levelsPath;
    public static int sceneWidth = 600;
    public static int sceneHeight = 600;
    public static int blockWidth = 0;
    public static int blockHeight = 0;
    public static String title = "Magasini√®re";

    public static final List<int[][]> levels = new ArrayList<>();

    public static boolean levelLoaded = false;

    public static int[][] levelStoreTemp = new int[10][10];
    public static int[][][] levelsInitial = new int[][][]{
            { // level 1
                    {1,1,1,1,1,1,1,1,1,1},
                    {1,1,1,2,2,2,1,1,1,1},
                    {1,1,1,2,3,2,1,1,1,1},
                    {1,1,1,2,0,2,2,2,2,1},
                    {1,2,2,2,4,5,4,3,2,1},
                    {1,2,3,0,4,0,2,2,2,1},
                    {1,2,2,2,2,4,2,1,1,1},
                    {1,1,1,1,2,3,2,1,1,1},
                    {1,1,1,1,2,2,2,1,1,1},
                    {1,1,1,1,1,1,1,1,1,1}
            },{ // level 2
            {2,2,2,2,2,1,1,1,1,1},
            {2,0,0,5,2,1,1,1,1,1},
            {2,0,4,4,2,1,2,2,2,1},
            {2,0,4,0,2,1,2,3,2,1},
            {2,2,2,0,2,2,2,3,2,1},
            {1,2,2,0,0,0,0,3,2,1},
            {1,2,0,0,0,2,0,0,2,1},
            {1,2,0,0,0,2,2,2,2,1},
            {1,2,2,2,2,2,1,1,1,1},
            {1,1,1,1,1,1,1,1,1,1}
    },{ // level 3
            {1,1,1,1,1,1,1,1,1,1},
            {1,1,1,2,2,2,2,1,1,1},
            {1,1,2,2,0,0,2,1,1,1},
            {1,1,2,0,5,4,2,1,1,1},
            {1,1,2,2,4,0,2,2,1,1},
            {1,1,2,2,0,4,0,2,1,1},
            {1,1,2,3,4,0,0,2,1,1},
            {1,1,2,3,3,6,3,2,1,1},
            {1,1,2,2,2,2,2,2,1,1},
            {1,1,1,1,1,1,1,1,1,1}
    },{ // level 4
            {1,1,1,1,1,1,1,1,1,1,},
            {1,1,2,2,2,2,1,1,1,1,},
            {1,1,2,5,0,2,2,2,1,1,},
            {1,1,2,0,4,0,0,2,1,1,},
            {1,2,2,2,0,2,0,2,2,1,},
            {1,2,3,2,0,2,0,0,2,1,},
            {1,2,3,4,0,0,2,0,2,1,},
            {1,2,3,0,0,0,4,0,2,1,},
            {1,2,2,2,2,2,2,2,2,1,},
            {1,1,1,1,1,1,1,1,1,1,},
    },{ // level 5
            {1,1,1,1,1,1,1,1,1,1,},
            {1,1,1,2,2,2,2,2,2,1,},
            {1,1,1,2,0,0,0,0,2,1,},
            {1,2,2,2,4,4,4,0,2,1,},
            {1,2,5,0,4,3,3,0,2,1,},
            {1,2,0,4,3,3,3,2,2,1,},
            {1,2,2,2,2,0,0,2,1,1,},
            {1,1,1,1,2,2,2,2,1,1,},
            {1,1,1,1,1,1,1,1,1,1,},
            {1,1,1,1,1,1,1,1,1,1,},
    },{ // level 6
            {1,1,1,1,1,1,1,1,1,1,},
            {1,1,1,2,2,2,2,2,1,1,},
            {1,2,2,2,0,0,5,2,1,1,},
            {1,2,0,0,4,3,0,2,2,1,},
            {1,2,0,0,3,4,3,0,2,1,},
            {1,2,2,2,0,6,4,0,2,1,},
            {1,1,1,2,0,0,0,2,2,1,},
            {1,1,1,2,2,2,2,2,1,1,},
            {1,1,1,1,1,1,1,1,1,1,},
            {1,1,1,1,1,1,1,1,1,1,},
    },{ // level 7
            {1,1,1,1,1,1,1,1,1,1,},
            {1,1,1,2,2,2,2,1,1,1,},
            {1,1,1,2,3,3,2,1,1,1,},
            {1,1,2,2,0,3,2,2,1,1,},
            {1,1,2,0,0,4,3,2,1,1,},
            {1,2,2,0,4,0,0,2,2,1,},
            {1,2,0,0,2,4,4,0,2,1,},
            {1,2,0,0,5,0,0,0,2,1,},
            {1,2,2,2,2,2,2,2,2,1,},
            {1,1,1,1,1,1,1,1,1,1,},
    },{ // level 8
            {1,1,1,1,1,1,1,1,1,1,},
            {1,2,2,2,2,2,2,2,2,1,},
            {1,2,0,0,2,0,0,0,2,1,},
            {1,2,0,4,3,3,4,0,2,1,},
            {1,2,5,4,3,6,0,2,2,1,},
            {1,2,0,4,3,3,4,0,2,1,},
            {1,2,0,0,2,0,0,0,2,1,},
            {1,2,2,2,2,2,2,2,2,1,},
            {1,1,1,1,1,1,1,1,1,1,},
            {1,1,1,1,1,1,1,1,1,1,},
    },{ // level 9
            {1,1,1,1,1,1,1,1,1,1,},
            {1,2,2,2,2,2,2,1,1,1,},
            {1,2,0,0,0,0,2,1,1,1,},
            {1,2,0,4,4,4,2,2,1,1,},
            {1,2,0,0,2,3,3,2,2,2,},
            {1,2,2,0,0,3,3,4,0,2,},
            {1,1,2,0,5,0,0,0,0,2,},
            {1,1,2,2,2,2,2,2,2,2,},
            {1,1,1,1,1,1,1,1,1,1,},
            {1,1,1,1,1,1,1,1,1,1,},
    },{ // level 10
            {1,1,1,1,1,1,1,1,1,1,},
            {1,2,2,2,2,2,2,2,1,1,},
            {1,2,3,3,4,3,3,2,1,1,},
            {1,2,3,3,2,3,3,2,1,1,},
            {1,2,0,4,4,4,0,2,1,1,},
            {1,2,0,0,4,0,0,2,1,1,},
            {1,2,0,4,4,4,0,2,1,1,},
            {1,2,0,0,2,5,0,2,1,1,},
            {1,2,2,2,2,2,2,2,1,1,},
            {1,1,1,1,1,1,1,1,1,1,},
    },{ // level 11
            {1,1,1,1,1,1,1,1,1,1,},
            {1,1,2,2,2,2,2,1,1,1,},
            {1,1,2,0,5,0,2,2,2,1,},
            {1,2,2,0,2,4,0,0,2,1,},
            {1,2,0,6,3,0,3,0,2,1,},
            {1,2,0,0,4,4,0,2,2,1,},
            {1,2,2,2,0,2,3,2,1,1,},
            {1,1,1,2,0,0,0,2,1,1,},
            {1,1,1,2,2,2,2,2,1,1,},
            {1,1,1,1,1,1,1,1,1,1,},
    },{ // level 12
            {1,1,1,1,1,1,1,1,1,1,},
            {1,1,2,2,2,2,2,2,1,1,},
            {1,1,2,0,0,0,0,2,1,1,},
            {1,1,2,0,4,0,5,2,1,1,},
            {1,1,2,2,6,0,0,2,1,1,},
            {1,1,2,0,6,0,2,2,1,1,},
            {1,1,2,0,6,0,2,1,1,1,},
            {1,1,2,0,6,0,2,1,1,1,},
            {1,1,2,0,3,0,2,1,1,1,},
            {1,1,2,2,2,2,2,1,1,1,},
    },{ // level 13
            {1,1,1,1,1,1,1,1,1,1,},
            {1,1,1,2,2,2,2,1,1,1,},
            {1,1,1,2,0,0,2,1,1,1,},
            {1,2,2,2,4,0,2,2,1,1,},
            {1,2,0,0,6,0,5,2,1,1,},
            {1,2,0,0,6,0,0,2,1,1,},
            {1,2,0,0,6,0,2,2,1,1,},
            {1,2,2,2,6,0,2,1,1,1,},
            {1,1,1,2,3,2,2,1,1,1,},
            {1,1,1,2,2,2,1,1,1,1,},
    },{ // level 14
            {1,1,1,1,1,1,1,1,1,1,},
            {1,2,2,2,2,2,1,1,1,1,},
            {1,2,0,0,0,2,2,2,2,2,},
            {1,2,0,2,0,2,0,0,0,2,},
            {1,2,0,4,0,0,0,4,0,2,},
            {1,2,3,3,2,4,2,4,2,2,},
            {1,2,3,5,4,0,0,0,2,1,},
            {1,2,3,3,0,0,2,2,2,1,},
            {1,2,2,2,2,2,2,1,1,1,},
            {1,1,1,1,1,1,1,1,1,1,},
    },{ // level 15
            {1,1,1,1,1,1,1,1,1,1,},
            {1,1,2,2,2,2,2,2,1,1,},
            {1,1,2,0,0,0,0,2,2,1,},
            {1,2,2,3,2,2,4,0,2,1,},
            {1,2,0,3,3,4,0,0,2,1,},
            {1,2,0,0,2,4,0,0,2,1,},
            {1,2,0,0,5,0,2,2,2,1,},
            {1,2,2,2,2,2,2,1,1,1,},
            {1,1,1,1,1,1,1,1,1,1,},
            {1,1,1,1,1,1,1,1,1,1,},
    }
    }; // Levels initial

    public static void addLevel(int[][] level){
        levels.add(level);
    }

    public static void getBlockSize(){
        blockWidth = sceneWidth / 10;
        blockHeight = sceneHeight / 10;
    }

    public static void loadAllLevels(){

        levelsPath = System.getProperty("user.dir") +"\\src\\resources\\Static\\Levels.txt";


        String path=levelsPath;
        FileInputStream fis = null;
        File file=new File(path);
        String sLevel = "";

        if (!file.exists()) {
            try {
                file.getParentFile().mkdirs();
                file.createNewFile();
            }
            catch (IOException e){
                e.printStackTrace();
                Platform.exit();
            }
        }
        if (!(file.isFile() && file.canRead())) {
            return;
        }

        List <String> levelList = new ArrayList<>();

        try {
            fis = new FileInputStream(file);

            if(fis.available() == 0){
                saveLevel();
            }

            while(fis.available() > 0){

                char current = (char) fis.read();

                if(current == '#'){
                    fis.read();
                    sLevel = sLevel.replace("\n", "");
                    levelList.add(sLevel);
                    sLevel = "";
                } else {
                    sLevel += current;
                }
            }
        } catch (IOException e){
            e.printStackTrace();
        }

        for(int i = 0; i < levelList.size(); i++){
            int[][] blocks = new int[10][10];

            String[] items = levelList.get(i).split(",");
            for(int j = 0; j < items.length; j++){
                int k = j / 10;
                int l = j % 10;
                blocks[k][l] = Integer.parseInt(items[j]);
            }

            Data.addLevel(blocks);
        }
    }

    public static void saveLevel(){
        for(int k = 0; k < 15; k++){
            levelStoreTemp = Data.levelsInitial[k]; //Store Level one by one

            for(int i = 0; i < 10; i++){
                for(int j = 0; j < 10; j++){
                    println("" + levelStoreTemp[i][j],0);
                    if(i != 9 || j != 9) println(",",0);
                }
            }
            println("#",1);
            levelStoreTemp = new int[10][10];

        }
    }
    static void println(String s,int x){
        try (BufferedWriter bw = new BufferedWriter(new FileWriter(Data.levelsPath, true))) {
            bw.write(s);
            if(x==1)
                bw.newLine();
        } catch (IOException e) {
            e.printStackTrace();
            Platform.exit();
        }
    }

} // Ends Data.java